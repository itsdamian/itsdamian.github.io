// Language translations
const translations = {
    zh: {
        // Navigation
        'nav.about': '關於我',
        'nav.experience': '工作經驗',
        'nav.skills': '技能專長',
        'nav.projects': '專案作品',
        'nav.education': '教育背景',
        'nav.contact': '聯絡資訊',
        
        // Hero Section
        'hero.greeting': '你好，我是',
        'hero.title': '資深後端工程師',
        'hero.description': '熟悉PHP, Python的後端工程師，也具有前端基礎技術包含HTML, JS JQuery等。專注於建立高效能、可擴展的網路應用程式。',
        'hero.contact': '聯絡我',
        'hero.projects': '查看作品',
        
        // About Section
        'about.title': '關於我',
        'about.subtitle': '專業背景',
        'about.description': '我是一名資深的後端工程師，擁有豐富的PHP和Python開發經驗。專注於建立高效能、可擴展的網路應用程式，並具備完整的前端技術基礎。',
        'about.location': 'New Taipei City, Taiwan',
        'about.languages': '語言能力',
        'about.chinese': '中文',
        'about.native': '母語',
        'about.english': '英文',
        'about.fluent': '精通',
        'about.korean': '韓文',
        'about.readable': '可讀可說',
        
        // Experience Section
        'experience.title': '工作經驗',
        'experience.current.title': 'Full Stack Engineer',
        'experience.current.period': 'May 2025 - Present',
        'experience.current.description': '全端工程師，負責開發和維護健康相關的網路應用程式。',
        'experience.astral.title': '資深後端工程師',
        'experience.astral.period': 'Feb 2024 - Apr 2025',
        'experience.astral.description': '負責後端系統開發和維護，專注於高效能應用程式的建構。',
        'experience.twhg.title': 'Web Developer',
        'experience.twhg.period': 'Aug 2018 - May 2019',
        'experience.twhg.description': '網頁開發工程師，負責企業內部系統的開發和維護。',
        'experience.adbert.title': 'Backend Engineer',
        'experience.adbert.period': 'Dec 2017 - Jul 2018',
        'experience.adbert.description': '後端工程師，負責廣告系統的後端開發和API設計。',
        'experience.educator.title': 'English & Math Educator',
        'experience.educator.company': 'Creativity Kindergarten & Creativity Cram School (Kaohsiung)',
        'experience.educator.period': 'Apr 2020 - Nov 2023',
        'experience.educator.achievement1': '• 設計幼兒和中等教育的模組化英語和數學課程計劃',
        'experience.educator.achievement2': '• 運用工程思維開發課程地圖和個性化學習系統',
        'experience.educator.achievement3': '• 使用試算表和視覺化進行跨群組績效分析',
        'experience.educator.achievement4': '• 完成早期教育方法和學習心理學課程',
        'experience.educator.achievement5': '• 通過個人專案和線上學習保持兼職編程技能',
        
        // Skills Section
        'skills.title': '技能專長',
        'skills.programming': '程式語言',
        'skills.testing': '測試框架',
        'skills.tools': '開發工具',
        'skills.api': 'API 技術',
        'skills.web': '前端技術',
        'skills.certification': '認證',
        'skills.cert1.title': 'Prompt Design in Vertex AI',
        'skills.cert1.issuer': 'Google Cloud Skills Boost',
        
        // Projects Section
        'projects.title': '專案作品',
        'projects.scan.title': '掃描覆核專案',
        'projects.scan.description': '開發文件掃描和覆核系統，提升工作效率和準確性。',
        'projects.review.title': '商品評論專案',
        'projects.review.description': '建立商品評論管理系統，包含評分、回覆和統計分析功能。',
        'projects.social.title': 'Social Login模組',
        'projects.social.description': '整合多種社交媒體登入功能，提供便捷的用戶認證體驗。',
        'projects.linebot.title': 'LineBot + AI LLM Modal',
        'projects.linebot.description': '結合Line機器人和AI語言模型，提供智能對話服務。',
        'projects.capstone.title': '畢業專案：視覺輔助系統',
        'projects.capstone.description': '開發圖像識別行動系統，協助視障用戶識別物體和環境。',
        
        // Education Section
        'education.title': '教育背景',
        'education.degree': '資訊管理學士',
        'education.school': '國立高雄大學',
        'education.location': '台灣',
        'education.period': '2013 - 2017',
        'education.capstone.title': '畢業專案',
        'education.capstone.description': '開發圖像識別行動系統，協助視障用戶識別物體和環境。運用機器學習和電腦視覺技術，為視障人士提供實用的輔助工具。',
        
        // Contact Section
        'contact.title': '聯絡資訊',
        'contact.subtitle': '讓我們開始合作',
        'contact.description': '如果您對我的技能和經驗感興趣，或者有任何專案需要討論，請隨時與我聯絡。我很樂意與您討論如何為您的專案帶來價值。',
        'contact.email.label': '電子郵件',
        'contact.phone.label': '電話',
        'contact.github.label': 'GitHub',
        'contact.location.label': '所在地',
        'contact.location.value': 'New Taipei City, Taiwan',
        'contact.form.title': '發送訊息',
        'contact.form.name': '姓名',
        'contact.form.email': '電子郵件',
        'contact.form.message': '訊息',
        'contact.form.submit': '發送訊息',
        
        // Footer
        'footer.rights': '保留所有權利。'
    },
    
    en: {
        // Navigation
        'nav.about': 'About',
        'nav.experience': 'Experience',
        'nav.skills': 'Skills',
        'nav.projects': 'Projects',
        'nav.education': 'Education',
        'nav.contact': 'Contact',
        
        // Hero Section
        'hero.greeting': 'Hello, I\'m',
        'hero.title': 'Senior PHP Developer',
        'hero.description': 'Backend engineer proficient in PHP and Python, with solid foundation in frontend technologies including HTML, JS, jQuery. Focused on building high-performance, scalable web applications.',
        'hero.contact': 'Contact Me',
        'hero.projects': 'View Projects',
        
        // About Section
        'about.title': 'About Me',
        'about.subtitle': 'Professional Background',
        'about.description': 'I am a senior backend engineer with extensive experience in PHP and Python development. Focused on building high-performance, scalable web applications with solid frontend technology foundation.',
        'about.location': 'New Taipei City, Taiwan',
        'about.languages': 'Language Skills',
        'about.chinese': 'Chinese',
        'about.native': 'Native',
        'about.english': 'English',
        'about.fluent': 'Fluent',
        'about.korean': 'Korean',
        'about.readable': 'Readable & Speakable',
        
        // Experience Section
        'experience.title': 'Work Experience',
        'experience.current.title': 'Full Stack Engineer',
        'experience.current.period': 'May 2025 - Present',
        'experience.current.description': 'Full stack engineer responsible for developing and maintaining health-related web applications.',
        'experience.astral.title': 'Senior Backend Engineer',
        'experience.astral.period': 'Feb 2024 - Apr 2025',
        'experience.astral.description': 'Responsible for backend system development and maintenance, focusing on high-performance application architecture.',
        'experience.twhg.title': 'Web Developer',
        'experience.twhg.period': 'Aug 2018 - May 2019',
        'experience.twhg.description': 'Web developer responsible for enterprise internal system development and maintenance.',
        'experience.adbert.title': 'Backend Engineer',
        'experience.adbert.period': 'Dec 2017 - Jul 2018',
        'experience.adbert.description': 'Backend engineer responsible for advertising system backend development and API design.',
        'experience.educator.title': 'English & Math Educator',
        'experience.educator.company': 'Creativity Kindergarten & Creativity Cram School (Kaohsiung)',
        'experience.educator.period': 'Apr 2020 - Nov 2023',
        'experience.educator.achievement1': '• Designed modular lesson plans for early childhood and secondary education in English and Math',
        'experience.educator.achievement2': '• Utilized engineering mindset to develop curriculum maps and personalized learning systems',
        'experience.educator.achievement3': '• Performed performance analysis across cohorts using spreadsheets and visualizations',
        'experience.educator.achievement4': '• Completed coursework in early education methodologies and learning psychology',
        'experience.educator.achievement5': '• Maintained part-time coding skills through personal projects and online learning',
        
        // Skills Section
        'skills.title': 'Skills & Expertise',
        'skills.programming': 'Programming Languages',
        'skills.testing': 'Testing Frameworks',
        'skills.tools': 'Development Tools',
        'skills.api': 'API Technologies',
        'skills.web': 'Frontend Technologies',
        'skills.certification': 'Certifications',
        'skills.cert1.title': 'Prompt Design in Vertex AI',
        'skills.cert1.issuer': 'Google Cloud Skills Boost',
        
        // Projects Section
        'projects.title': 'Projects',
        'projects.scan.title': 'Scan Review Project',
        'projects.scan.description': 'Developed document scanning and review system to improve work efficiency and accuracy.',
        'projects.review.title': 'Product Review Project',
        'projects.review.description': 'Built product review management system with rating, reply, and statistical analysis features.',
        'projects.social.title': 'Social Login Module',
        'projects.social.description': 'Integrated multiple social media login features to provide convenient user authentication experience.',
        'projects.linebot.title': 'LineBot + AI LLM Modal',
        'projects.linebot.description': 'Combined Line bot with AI language model to provide intelligent conversation services.',
        'projects.capstone.title': 'Capstone Project: Visual Assistance System',
        'projects.capstone.description': 'Developed image recognition mobile system to assist visually impaired users in identifying objects and environments.',
        
        // Education Section
        'education.title': 'Education',
        'education.degree': 'Bachelor of Information Management',
        'education.school': 'National University of Kaohsiung',
        'education.location': 'Taiwan',
        'education.period': '2013 - 2017',
        'education.capstone.title': 'Capstone Project',
        'education.capstone.description': 'Developed image recognition mobile system to assist visually impaired users in identifying objects and environments. Applied machine learning and computer vision technologies to provide practical assistance tools for visually impaired individuals.',
        
        // Contact Section
        'contact.title': 'Contact Information',
        'contact.subtitle': 'Let\'s Start Collaborating',
        'contact.description': 'If you are interested in my skills and experience, or have any projects to discuss, please feel free to contact me. I am happy to discuss how I can bring value to your projects.',
        'contact.email.label': 'Email',
        'contact.phone.label': 'Phone',
        'contact.github.label': 'GitHub',
        'contact.location.label': 'Location',
        'contact.location.value': 'New Taipei City, Taiwan',
        'contact.form.title': 'Send Message',
        'contact.form.name': 'Name',
        'contact.form.email': 'Email',
        'contact.form.message': 'Message',
        'contact.form.submit': 'Send Message',
        
        // Footer
        'footer.rights': 'All rights reserved.'
    },
    
    ko: {
        // Navigation
        'nav.about': '소개',
        'nav.experience': '경력',
        'nav.skills': '기술',
        'nav.projects': '프로젝트',
        'nav.education': '학력',
        'nav.contact': '연락처',
        
        // Hero Section
        'hero.greeting': '안녕하세요, 저는',
        'hero.title': '시니어 PHP 개발자',
        'hero.description': 'PHP와 Python에 능숙한 백엔드 엔지니어로, HTML, JS, jQuery 등 프론트엔드 기술 기반을 갖추고 있습니다. 고성능, 확장 가능한 웹 애플리케이션 구축에 중점을 둡니다.',
        'hero.contact': '연락하기',
        'hero.projects': '프로젝트 보기',
        
        // About Section
        'about.title': '소개',
        'about.subtitle': '전문 배경',
        'about.description': 'PHP와 Python 개발에 풍부한 경험을 가진 시니어 백엔드 엔지니어입니다. 견고한 프론트엔드 기술 기반으로 고성능, 확장 가능한 웹 애플리케이션 구축에 중점을 둡니다.',
        'about.location': 'New Taipei City, Taiwan',
        'about.languages': '언어 능력',
        'about.chinese': '중국어',
        'about.native': '모국어',
        'about.english': '영어',
        'about.fluent': '유창함',
        'about.korean': '한국어',
        'about.readable': '읽기/말하기 가능',
        
        // Experience Section
        'experience.title': '경력',
        'experience.current.title': '풀스택 엔지니어',
        'experience.current.period': '2025년 5월 - 현재',
        'experience.current.description': '건강 관련 웹 애플리케이션 개발 및 유지보수를 담당하는 풀스택 엔지니어',
        'experience.astral.title': '시니어 백엔드 엔지니어',
        'experience.astral.period': '2024년 2월 - 2025년 4월',
        'experience.astral.description': '백엔드 시스템 개발 및 유지보수를 담당하며 고성능 애플리케이션 아키텍처에 중점',
        'experience.twhg.title': '웹 개발자',
        'experience.twhg.period': '2018년 8월 - 2019년 5월',
        'experience.twhg.description': '기업 내부 시스템 개발 및 유지보수를 담당하는 웹 개발자',
        'experience.adbert.title': '백엔드 엔지니어',
        'experience.adbert.period': '2017년 12월 - 2018년 7월',
        'experience.adbert.description': '광고 시스템 백엔드 개발 및 API 설계를 담당하는 백엔드 엔지니어',
        'experience.educator.title': '영어 & 수학 교육자',
        'experience.educator.company': 'Creativity Kindergarten & Creativity Cram School (Kaohsiung)',
        'experience.educator.period': '2020년 4월 - 2023년 11월',
        'experience.educator.achievement1': '• 유아 및 중등 교육을 위한 모듈화된 영어 및 수학 수업 계획 설계',
        'experience.educator.achievement2': '• 엔지니어링 마인드셋을 활용하여 커리큘럼 맵과 개인화 학습 시스템 개발',
        'experience.educator.achievement3': '• 스프레드시트와 시각화를 사용한 코호트 간 성과 분석 수행',
        'experience.educator.achievement4': '• 조기 교육 방법론 및 학습 심리학 과정 수료',
        'experience.educator.achievement5': '• 개인 프로젝트와 온라인 학습을 통한 파트타임 코딩 기술 유지',
        
        // Skills Section
        'skills.title': '기술 및 전문성',
        'skills.programming': '프로그래밍 언어',
        'skills.testing': '테스트 프레임워크',
        'skills.tools': '개발 도구',
        'skills.api': 'API 기술',
        'skills.web': '프론트엔드 기술',
        'skills.certification': '자격증',
        'skills.cert1.title': 'Prompt Design in Vertex AI',
        'skills.cert1.issuer': 'Google Cloud Skills Boost',
        
        // Projects Section
        'projects.title': '프로젝트',
        'projects.scan.title': '스캔 검토 프로젝트',
        'projects.scan.description': '작업 효율성과 정확성을 향상시키는 문서 스캔 및 검토 시스템 개발',
        'projects.review.title': '상품 리뷰 프로젝트',
        'projects.review.description': '평점, 답글, 통계 분석 기능을 포함한 상품 리뷰 관리 시스템 구축',
        'projects.social.title': '소셜 로그인 모듈',
        'projects.social.description': '편리한 사용자 인증 경험을 제공하는 다중 소셜 미디어 로그인 기능 통합',
        'projects.linebot.title': 'LineBot + AI LLM Modal',
        'projects.linebot.description': 'Line 봇과 AI 언어 모델을 결합하여 지능형 대화 서비스 제공',
        'projects.capstone.title': '졸업 프로젝트: 시각 보조 시스템',
        'projects.capstone.description': '시각 장애인이 물체와 환경을 식별하는 데 도움을 주는 이미지 인식 모바일 시스템 개발',
        
        // Education Section
        'education.title': '학력',
        'education.degree': '정보관리학 학사',
        'education.school': '국립고雄대학교',
        'education.location': '대만',
        'education.period': '2013 - 2017',
        'education.capstone.title': '졸업 프로젝트',
        'education.capstone.description': '시각 장애인이 물체와 환경을 식별하는 데 도움을 주는 이미지 인식 모바일 시스템을 개발했습니다. 머신러닝과 컴퓨터 비전 기술을 적용하여 시각 장애인을 위한 실용적인 보조 도구를 제공합니다.',
        
        // Contact Section
        'contact.title': '연락처 정보',
        'contact.subtitle': '협업을 시작해보세요',
        'contact.description': '제 기술과 경험에 관심이 있으시거나 논의할 프로젝트가 있으시면 언제든 연락해 주세요. 귀하의 프로젝트에 가치를 더할 수 있는 방법에 대해 논의하는 것을 기쁘게 생각합니다.',
        'contact.email.label': '이메일',
        'contact.phone.label': '전화',
        'contact.github.label': 'GitHub',
        'contact.location.label': '위치',
        'contact.location.value': 'New Taipei City, Taiwan',
        'contact.form.title': '메시지 보내기',
        'contact.form.name': '이름',
        'contact.form.email': '이메일',
        'contact.form.message': '메시지',
        'contact.form.submit': '메시지 보내기',
        
        // Footer
        'footer.rights': '모든 권리 보유.'
    }
};

// Current language
let currentLang = 'zh';

// DOM elements
const langButtons = document.querySelectorAll('.lang-btn');
const mobileMenuBtn = document.getElementById('mobile-menu-btn');
const mobileMenu = document.getElementById('mobile-menu');

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguage();
    initializeMobileMenu();
    initializeScrollAnimations();
    initializeContactForm();
    initializeScrollIndicator();
});

// Language switching functionality
function initializeLanguage() {
    langButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.dataset.lang;
            switchLanguage(lang);
            
            // Update active button
            langButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
        });
    });
}

function switchLanguage(lang) {
    currentLang = lang;
    const elements = document.querySelectorAll('[data-lang-key]');
    
    elements.forEach(element => {
        const key = element.dataset.langKey;
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update document title
    document.title = lang === 'zh' ? '林書弘 - Senior PHP Developer' : 
                    lang === 'en' ? 'Shu-Hong Lin - Senior PHP Developer' : 
                    '임서홍 - Senior PHP Developer';
}

// Mobile menu functionality
function initializeMobileMenu() {
    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Close mobile menu when clicking on a link
        const mobileLinks = mobileMenu.querySelectorAll('a');
        mobileLinks.forEach(link => {
            link.addEventListener('click', function() {
                mobileMenu.classList.add('hidden');
            });
        });
    }
}

// Scroll animations
function initializeScrollAnimations() {
    const sections = document.querySelectorAll('section');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });
    
    sections.forEach(section => {
        observer.observe(section);
    });
}

// Contact form functionality
function initializeContactForm() {
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const name = formData.get('name') || form.querySelector('input[type="text"]').value;
            const email = formData.get('email') || form.querySelector('input[type="email"]').value;
            const message = formData.get('message') || form.querySelector('textarea').value;
            
            // Simple validation
            if (!name || !email || !message) {
                alert(currentLang === 'zh' ? '請填寫所有欄位' : 
                      currentLang === 'en' ? 'Please fill in all fields' : 
                      '모든 필드를 입력해주세요');
                return;
            }
            
            // Here you would typically send the form data to a server
            // For now, we'll just show a success message
            alert(currentLang === 'zh' ? '訊息已發送！' : 
                  currentLang === 'en' ? 'Message sent!' : 
                  '메시지가 전송되었습니다!');
            
            form.reset();
        });
    }
}

// Scroll indicator
function initializeScrollIndicator() {
    const scrollIndicator = document.createElement('div');
    scrollIndicator.className = 'scroll-indicator';
    document.body.appendChild(scrollIndicator);
    
    window.addEventListener('scroll', function() {
        const scrollTop = window.pageYOffset;
        const docHeight = document.body.scrollHeight - window.innerHeight;
        const scrollPercent = (scrollTop / docHeight) * 100;
        scrollIndicator.style.width = scrollPercent + '%';
    });
}

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Add loading animation to skill bars
function animateSkillBars() {
    const skillBars = document.querySelectorAll('.skill-bar');
    skillBars.forEach(bar => {
        const width = bar.style.width;
        bar.style.width = '0%';
        setTimeout(() => {
            bar.style.width = width;
        }, 500);
    });
}

// Call skill bar animation when skills section is visible
const skillsSection = document.getElementById('skills');
if (skillsSection) {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateSkillBars();
                observer.unobserve(entry.target);
            }
        });
    });
    observer.observe(skillsSection);
}

// Add hover effects to project cards
document.querySelectorAll('.bg-white').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-5px)';
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
    });
});

// Keyboard navigation support
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && mobileMenu && !mobileMenu.classList.contains('hidden')) {
        mobileMenu.classList.add('hidden');
    }
});

// Performance optimization: Debounce scroll events
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Apply debouncing to scroll events
const debouncedScrollHandler = debounce(() => {
    // Any scroll-based functionality can go here
}, 10);

window.addEventListener('scroll', debouncedScrollHandler); 